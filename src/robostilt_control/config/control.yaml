robostilt:
  # Publish all joint states -----------------------------------
  joint_state_controller:
    type: joint_state_controller/JointStateController
    publish_rate: &publish_rate 50  

  # GAINS-------------------------------------------------------
  # i_clamp should be close to the maximum effort possible by the joint, to avoid windup.
  leg_pid_gains: {p: &leg_p_default 1000.0, i: &leg_i_default 15.0, d: &leg_d_default 50.0, i_clamp: &leg_i_clamp_default 50.0}
  third_frame_revolute_pid_gains: {p: &revolute_p_default 1000.0, i: &revolute_i_default 15.0, d: &revolute_d_default 50.0, i_clamp: &revolute_i_clamp_default 50.0}
  third_frame_prismatic_pid_gains: {p: &prismatic_p_default 1000.0, i: &prismatic_i_default 15.0, d: &prismatic_d_default 50.0, i_clamp: &prismatic_i_clamp_default 50.0}

# Position Controller ---------------------------------------
  # 1DOF Position. Velocity limit in Gazebo or on joint_limits_interface. No further trajectorization
  leg_2_position_controller:
        # Manipulation does not get visible clamped on the topic /state/command, but gazebo does clamp it.         
        #     Manipulation type   Controlled variable
        type: effort_controllers/JointPositionController
      # type: effort_controllers/JointVelocityController
      # type: effort_controllers/JointEffortController
        joint: base_link_to_leg_2
        pid: 
          p: *leg_p_default
          i: *leg_i_default
          d: *leg_d_default
          i_clamp: *leg_i_clamp_default


  leg_4_position_controller:
    type: effort_controllers/JointPositionController
    joint: base_link_to_leg_4
    pid: {p: *leg_p_default, i: *leg_i_default, d: *leg_d_default, i_clamp: *leg_i_clamp_default}

  leg_6_position_controller:
    type: effort_controllers/JointPositionController
    joint: base_link_to_leg_6
    pid: {p: *leg_p_default, i: *leg_i_default, d: *leg_d_default, i_clamp: *leg_i_clamp_default}

  leg_1_position_controller:
    type: effort_controllers/JointPositionController
    joint: odd_frame_to_leg_1
    pid: {p: *leg_p_default, i: *leg_i_default, d: *leg_d_default, i_clamp: *leg_i_clamp_default}

  leg_3_position_controller:
    type: effort_controllers/JointPositionController
    joint: odd_frame_to_leg_3
    pid: {p: *leg_p_default, i: *leg_i_default, d: *leg_d_default, i_clamp: *leg_i_clamp_default}

  leg_5_position_controller:
    type: effort_controllers/JointPositionController
    joint: odd_frame_to_leg_5
    pid: {p: *leg_p_default, i: *leg_i_default, d: *leg_d_default, i_clamp: *leg_i_clamp_default}

  third_frame_revolute_position_controller:
    type: effort_controllers/JointPositionController
    joint: third_frame_to_odd_frame
    pid: {p: *revolute_p_default, i: *revolute_i_default, d: *revolute_d_default, i_clamp: *revolute_i_clamp_default}

  third_frame_prismatic_position_controller:
    type: effort_controllers/JointPositionController
    joint: base_link_to_third_frame
    pid: {p: *prismatic_p_default, i: *prismatic_i_default, d: *prismatic_d_default, i_clamp: *prismatic_i_clamp_default}

  # TRAJECTORY CONTROLLER---------------------------------------------------------------------------------
  # Fully trajectorized position over time, multiple joints and multiple positoins over time
  trajectory_controller:
#       Manipulation type      Controlled variable
    type: "effort_controllers/JointTrajectoryController"
    state_publish_rate:  *publish_rate
    action_monitor_rate: *publish_rate
    constraints:
      #CONSTRAINTS
      #If the timestamp of the goal trajectory point is t, then following the trajectory succeeds if it reaches the goal within t +/- goal_time, and aborts otherwise.
      goal_time:  1.0  #time tolerance
      # Velocity to be considered approximately equal to zero.
      stopped_velocity_tolerance: 0.5
      # When starting the controller or canceling a trajectory, position hold mode is entered. This parameter specifies the time it takes to bring the current state (position and velocity) to a stop. Its value can be greater or equal than zero.    
      stop_trajectory_duration: 0.0
      #Position tolerance for a particular joint to reach the goal. When the joint is within goal_position +/- goal_tolerance, than the trajectory can succeed.
      goal: &goal_pos_constraint 0.5  #End goal Tolerance
      #Position tolerance for a particular joint throughout the trajectory. If the joint position ever falls outside trajectory_position +/- tolerance, then the trajectory aborts.
      trajectory: &trajectory_pos_constraint 0.5  #Tracking fault

    allow_partial_joints_goal: true 

    #JOINTS--------------------------------------------------------------------------------------------
    joints: 
      - base_link_to_third_frame  #prismatic=0
      - odd_frame_to_leg_1
      - base_link_to_leg_2
      - odd_frame_to_leg_3
      - base_link_to_leg_4
      - odd_frame_to_leg_5
      - base_link_to_leg_6
      - third_frame_to_odd_frame  #revolute=7
    gains:
      base_link_to_leg_2: {p: *leg_p_default, i: *leg_i_default, d: *leg_d_default, i_clamp: *leg_i_clamp_default}
      base_link_to_leg_4: {p: *leg_p_default, i: *leg_i_default, d: *leg_d_default, i_clamp: *leg_i_clamp_default}
      base_link_to_leg_6: {p: *leg_p_default, i: *leg_i_default, d: *leg_d_default, i_clamp: *leg_i_clamp_default}

      odd_frame_to_leg_1: {p: *leg_p_default, i: *leg_i_default, d: *leg_d_default, i_clamp: *leg_i_clamp_default}
      odd_frame_to_leg_3: {p: *leg_p_default, i: *leg_i_default, d: *leg_d_default, i_clamp: *leg_i_clamp_default}
      odd_frame_to_leg_5: {p: *leg_p_default, i: *leg_i_default, d: *leg_d_default, i_clamp: *leg_i_clamp_default}

      base_link_to_third_frame: {p: *leg_p_default, i: *leg_i_default, d: *leg_d_default, i_clamp: *leg_i_clamp_default}
      third_frame_to_odd_frame: {p: *leg_p_default, i: *leg_i_default, d: *leg_d_default, i_clamp: *leg_i_clamp_default}

    gazebo_ros_control:
      pid_gains:
        base_link_to_third_frame: {p: 100.0, i: 0.01, d: 10.0}
        odd_frame_to_leg_1: {p: 100.0, i: 0.01, d: 10.0}
        base_link_to_leg_2: {p: 100.0, i: 0.01, d: 10.0}
        odd_frame_to_leg_3: {p: 100.0, i: 0.01, d: 10.0}
        base_link_to_leg_4: {p: 100.0, i: 0.01, d: 10.0}
        odd_frame_to_leg_5: {p: 100.0, i: 0.01, d: 10.0}
        base_link_to_leg_6: {p: 100.0, i: 0.01, d: 10.0}
        third_frame_to_odd_frame: {p: 100.0, i: 0.01, d: 10.0}
    #TOLERANCES  -------------------------------------------------------------------------      
    base_link_to_leg_2:
      goal: *goal_pos_constraint
      trajectory: *trajectory_pos_constraint
    base_link_to_leg_4:          
      goal: *goal_pos_constraint
      trajectory: *trajectory_pos_constraint
    base_link_to_leg_6:          
      goal: *goal_pos_constraint
      trajectory: *trajectory_pos_constraint

    odd_frame_to_leg_1:
      goal: *goal_pos_constraint
      trajectory: *trajectory_pos_constraint
    odd_frame_to_leg_3:          
      goal: *goal_pos_constraint
      trajectory: *trajectory_pos_constraint
    odd_frame_to_leg_5:          
      goal: *goal_pos_constraint
      trajectory: *trajectory_pos_constraint

    base_link_to_third_frame:
      goal: *goal_pos_constraint
      trajectory: *trajectory_pos_constraint

    third_frame_to_odd_frame:          
      goal: *goal_pos_constraint
      trajectory: *trajectory_pos_constraint  

